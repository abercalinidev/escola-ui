<div class="container">

  <div class="breadcrumb mb-3">
    <i class="pi pi-home mr-2 text-gray-500"></i>
    <span class="text-gray-500">In√≠cio</span>
    <span class="mx-2 text-gray-400">/</span>
    <span class="text-gray-700 font-semibold">Informa√ß√µes Gerais</span>
  </div>

  <div class="page-header mb-4 flex align-items-center">
    <i class="pi pi-file text-3xl text-primary mr-3"></i>
    <div>
      <h1 class="page-title m-0">Informa√ß√µes Gerais</h1>
      <p class="page-subtitle m-0">
        Consulte e gerencie os registros di√°rios das informa√ß√µes gerais.
      </p>
    </div>
  </div>

  <div class="grid mb-4">

    <div class="col-12 md:col-4">
      <div class="summary-card p-3 shadow-2 border-round-lg">
        <div class="flex align-items-center">
          <i class="pi pi-folder text-2xl text-primary mr-3"></i>
          <div>
            <h3 class="summary-title">Total Registrados</h3>
            <p class="summary-value">{{ informacoes.length || 0 }}</p>
          </div>
        </div>
      </div>
    </div>

    <div class="col-12 md:col-4">
      <div class="summary-card p-3 shadow-2 border-round-lg">
        <div class="flex align-items-center">
          <i class="pi pi-calendar text-2xl text-green-500 mr-3"></i>
          <div>
            <h3 class="summary-title">Registrados Hoje</h3>
            <p class="summary-value">{{ registrosHojeCount || 0 }}</p>
          </div>
        </div>
      </div>
    </div>

    <div class="col-12 md:col-4">
      <div class="summary-card p-3 shadow-2 border-round-lg">
        <div class="flex align-items-center">
          <i class="pi pi-clock text-2xl text-orange-500 mr-3"></i>
          <div>
            <h3 class="summary-title">√öltima Data</h3>
            <p class="summary-value">{{ ultimaData || '-' }}</p>
          </div>
        </div>
      </div>
    </div>

  </div>

  <!-- üîπ TOOLBAR -->
  <p-toolbar styleClass="mb-4 surface-card shadow-2 border-round-lg p-3">
    <ng-template #start>
      <div class="flex gap-2">
        <p-button 
          label="Novo" 
          icon="pi pi-plus"
          styleClass="p-button-success"
          routerLink="/informacaogeral-cadastro">
        </p-button>

        <p-button 
          label="Editar" 
          icon="pi pi-pencil"
          severity="info"
          [disabled]="!infoSelecionada"
          (onClick)="prepararEditarInformacaoGeral()">
        </p-button>

        <p-button 
          label="Excluir" 
          icon="pi pi-trash"
          severity="danger"
          [disabled]="!infoSelecionada"
          (onClick)="prepararRemoverInformacaoGeral()">
        </p-button>
      </div>
    </ng-template>
  </p-toolbar>

  <!-- üîπ TABELA -->
  <p-card class="shadow-3 border-round-lg">

    <p-table
      [value]="informacoes"
      selectionMode="single"
      [(selection)]="infoSelecionada"
      dataKey="id"
      [paginator]="true"
      [rows]="10"
      [rowsPerPageOptions]="[10, 20, 30]"
      responsiveLayout="stack"
      [tableStyle]="{ 'min-width': '60rem' }"
      [globalFilterFields]="[
        'id',
        'aluno.nome',
        'dataCadastro'
      ]"
      #dt>

      <!-- üîπ Filtro Global -->
      <ng-template pTemplate="caption">
        <div class="flex justify-content-end">
          <p-iconfield iconPosition="left">
            <p-inputicon><i class="pi pi-search"></i></p-inputicon>
            <input 
              pInputText 
              type="text"
              #searchBox
              (input)="dt.filterGlobal(searchBox.value, 'contains')"
              placeholder="Filtro Global" />
          </p-iconfield>
        </div>
      </ng-template>

      <!-- üîπ Cabe√ßalho -->
      <ng-template pTemplate="header">
        <tr>
          <th pSortableColumn="id">ID <p-sortIcon field="id"></p-sortIcon></th>
          <th pSortableColumn="aluno.nome">Aluno <p-sortIcon field="aluno.nome"></p-sortIcon></th>
          <th pSortableColumn="situacaoCafeManha">Caf√© Manh√£ <p-sortIcon field="situacaoCafeManha"></p-sortIcon></th>
          <th pSortableColumn="situacaoAlmoco">Almo√ßo <p-sortIcon field="situacaoAlmoco"></p-sortIcon></th>
          <th pSortableColumn="situacaoCafeTarde">Caf√© Tarde <p-sortIcon field="situacaoCafeTarde"></p-sortIcon></th>
          <th pSortableColumn="dataCadastro">Data Cadastro <p-sortIcon field="dataCadastro"></p-sortIcon></th>
        </tr>
      </ng-template>

      <!-- üîπ Corpo -->
      <ng-template pTemplate="body" let-i>
        <tr [pSelectableRow]="i">

          <td>{{ i.id }}</td>
          <td>{{ i.aluno.nome }}</td>
          <td>{{ i.situacaoCafeManha }}</td>
          <td>{{ i.situacaoAlmoco }}</td>
          <td>{{ i.situacaoCafeTarde }}</td>
          <td>{{ i.dataCadastro }}</td>

        </tr>
      </ng-template>

    </p-table>

  </p-card>

  <p-toast></p-toast>
  <p-confirmDialog></p-confirmDialog>
</div>
